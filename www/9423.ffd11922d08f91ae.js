"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9423],{9423:(U,_,s)=>{s.r(_),s.d(_,{MorpionPage:()=>N});var P=s(467),g=s(177),M=s(4341),l=s(2875),e=s(3953),y=s(6263);let h=(()=>{var o;class c{constructor(t){this.popupService=t,this.currentPlayer="X",this.board=[],this.gameEnded=!1,this.difficulty="facile",this.thinking=!1,this.winningPositions=null}get getdifficulty(){return this.difficulty}startGame(t,n){console.log(n),this.currentPlayer=""!=n?"Joueur"===t?"X":"O":"Joueur 1"===t?"X":"O",this.board=[["","",""],["","",""],["","",""]],this.gameEnded=!1,this.difficulty=n,this.winningPositions=null,""!=this.difficulty&&"O"===this.currentPlayer&&this.aiMove()}selectSquare(t,n){if(!this.board[t][n]&&!this.gameEnded){this.board[t][n]=this.currentPlayer;const i=this.checkWinner(t,n);i?(this.gameEnded=!0,this.winningPositions=i,console.log(`${this.currentPlayer} a gagn\xe9 !`),""!=this.difficulty?this.popupService.showGameResultPopup("X"===this.currentPlayer?"player":"computer",this.difficulty,a=>{this.startGame("Joueur",a)}):this.popupService.showGameResultPopup("X"===this.currentPlayer?"player1":"player2",this.difficulty,a=>{this.startGame("Joueur 1",a)})):this.isDraw()?(console.log("draw"),this.gameEnded=!0,this.popupService.showGameResultPopup("draw",this.difficulty,a=>{this.startGame("Joueur",a)})):(this.currentPlayer="X"===this.currentPlayer?"O":"X",""!=this.difficulty&&"O"===this.currentPlayer&&this.aiMove())}}checkWinner(t,n){let i=[];return this.board[t][0]===this.currentPlayer&&this.board[t][1]===this.currentPlayer&&this.board[t][2]===this.currentPlayer?i=[[t,0],[t,1],[t,2]]:this.board[0][n]===this.currentPlayer&&this.board[1][n]===this.currentPlayer&&this.board[2][n]===this.currentPlayer?i=[[0,n],[1,n],[2,n]]:t===n&&this.board[0][0]===this.currentPlayer&&this.board[1][1]===this.currentPlayer&&this.board[2][2]===this.currentPlayer?i=[[0,0],[1,1],[2,2]]:t+n===2&&this.board[0][2]===this.currentPlayer&&this.board[1][1]===this.currentPlayer&&this.board[2][0]===this.currentPlayer&&(i=[[0,2],[1,1],[2,0]]),i.length>0?i:null}isDraw(){let t=!0;for(let n=0;n<this.board.length;n++)for(let i=0;i<this.board[n].length;i++)""===this.board[n][i]&&(t=!1);return t}aiMove(){this.thinking=!0,setTimeout(()=>{let t;switch(this.difficulty){case"facile":default:t=this.getRandomMove();break;case"medium":t=this.getMediumMove();break;case"expert":t=this.getBestMove()}t&&this.selectSquare(t.row,t.col),this.thinking=!1},1e3)}getRandomMove(){const t=[];for(let n=0;n<3;n++)for(let i=0;i<3;i++)""===this.board[n][i]&&t.push({row:n,col:i});return t[Math.floor(Math.random()*t.length)]}getMediumMove(){return Math.random()<.5?this.getRandomMove():this.getBestMove()}getBestMove(){let t=-1/0,n={row:-1,col:-1};for(let i=0;i<3;i++)for(let a=0;a<3;a++)if(""===this.board[i][a]){this.board[i][a]="O";let m=this.minimax(this.board,0,!1);this.board[i][a]="",m>t&&(t=m,n={row:i,col:a})}return-1===n.row?null:n}minimax(t,n,i){const m=this.checkWinnerMinimax(t);if(null!==m)return{O:1,X:-1,tie:0}[m];if(i){let p=-1/0;for(let u=0;u<3;u++)for(let f=0;f<3;f++)if(""===t[u][f]){t[u][f]="O";let v=this.minimax(t,n+1,!1);t[u][f]="",p=Math.max(v,p)}return p}{let p=1/0;for(let u=0;u<3;u++)for(let f=0;f<3;f++)if(""===t[u][f]){t[u][f]="X";let v=this.minimax(t,n+1,!0);t[u][f]="",p=Math.min(v,p)}return p}}checkWinnerMinimax(t){for(let i=0;i<3;i++){if(t[i][0]===t[i][1]&&t[i][1]===t[i][2]&&""!==t[i][0])return t[i][0];if(t[0][i]===t[1][i]&&t[1][i]===t[2][i]&&""!==t[0][i])return t[0][i]}if(t[0][0]===t[1][1]&&t[1][1]===t[2][2]&&""!==t[0][0])return t[0][0];if(t[0][2]===t[1][1]&&t[1][1]===t[2][0]&&""!==t[0][2])return t[0][2];let n=0;for(let i=0;i<3;i++)for(let a=0;a<3;a++)""===t[i][a]&&n++;return 0===n?"tie":null}}return(o=c).\u0275fac=function(t){return new(t||o)(e.KVO(y.O))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),c})();var C=s(2462);const b=(o,c)=>({"background-color":o,"background-image":c});let x=(()=>{var o;class c{constructor(t,n){this.gameService=t,this.shopService=n,this.value="",this.row=0,this.col=0,this.background_color=this.shopService.TTTbgcolor,this.background_skin=this.shopService.TTTbgskin}ngOnInit(){}getWinningClass(){if(this.gameService.winningPositions)for(let t of this.gameService.winningPositions)if(t[0]===this.row&&t[1]===this.col)return"X"===this.gameService.currentPlayer?"win-player":"win-computer";return""}}return(o=c).\u0275fac=function(t){return new(t||o)(e.rXU(h),e.rXU(C.s))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-square"]],inputs:{value:"value",row:"row",col:"col"},standalone:!0,features:[e.aNF],decls:2,vars:6,consts:[[1,"square",3,"ngClass","ngStyle"]],template:function(t,n){1&t&&(e.j41(0,"div",0),e.EFF(1),e.k0s()),2&t&&(e.Y8G("ngClass",n.getWinningClass())("ngStyle",e.l_i(3,b,n.background_color,"url("+n.background_skin+")")),e.R7$(),e.SpI(" ",n.value,"\n"))},dependencies:[g.YU,g.B3],styles:['@charset "UTF-8";.square[_ngcontent-%COMP%]{color:#070707;width:70px;height:70px;font-size:3em;text-align:center;padding-top:12px;line-height:100%}.square[_ngcontent-%COMP%]:nth-child(n+1){background:#47d4ff}.square[_ngcontent-%COMP%]:nth-child(n+1){background-size:cover;background-repeat:no-repeat}.win-player[_ngcontent-%COMP%]{background-color:green!important;color:#fff;animation:_ngcontent-%COMP%_glow 1s infinite alternate}.win-computer[_ngcontent-%COMP%]{background-color:red!important;color:#fff;animation:_ngcontent-%COMP%_glow 1s infinite alternate}@keyframes _ngcontent-%COMP%_glow{0%{box-shadow:inset 0 0 5px 5px #ffffff80}to{box-shadow:inset 0 0 10px 10px #fff}}']}),c})();function O(o,c){if(1&o){const r=e.RV6();e.j41(0,"ion-col",3),e.bIt("click",function(){const n=e.eBV(r).index,i=e.XpG().index,a=e.XpG();return e.Njj(""==a.gameService.difficulty||"X"===a.gameService.currentPlayer&&!a.gameService.thinking?a.selectSquare(i,n):null)}),e.nrm(1,"app-square",4),e.k0s()}if(2&o){const r=c.index,t=e.XpG().index,n=e.XpG();e.R7$(),e.Y8G("value",n.gameService.board[t][r])("row",t)("col",r)}}function k(o,c){if(1&o&&(e.j41(0,"ion-row"),e.DNE(1,O,2,3,"ion-col",2),e.k0s()),2&o){const r=c.$implicit;e.R7$(),e.Y8G("ngForOf",r)}}let S=(()=>{var o;class c{constructor(t){this.gameService=t}ngOnInit(){this.gameService.startGame("player","facile")}selectSquare(t,n){this.gameService.selectSquare(t,n)}}return(o=c).\u0275fac=function(t){return new(t||o)(e.rXU(h))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-gameboard"]],standalone:!0,features:[e.aNF],decls:2,vars:1,consts:[[1,"game-board"],[4,"ngFor","ngForOf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[3,"value","row","col"]],template:function(t,n){1&t&&(e.j41(0,"ion-grid",0),e.DNE(1,k,2,1,"ion-row",1),e.k0s()),2&t&&(e.R7$(),e.Y8G("ngForOf",n.gameService.board))},dependencies:[x,g.Sq,l.lO,l.hU,l.ln],styles:[".game-board[_ngcontent-%COMP%]{background:#333}.square[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:2rem;height:100px;width:100px;border:1px solid #ccc}"]}),c})();var T=s(7220),G=s(3044),w=s(5079),d=s(5873),j=s(4152),F=s(7604),X=s(8880);const R=o=>({visible:o});function I(o,c){1&o&&(e.j41(0,"div"),e.nrm(1,"app-loader"),e.k0s())}function D(o,c){1&o&&(e.j41(0,"div",11),e.nrm(1,"app-loader",12),e.k0s())}function E(o,c){if(1&o){const r=e.RV6();e.j41(0,"ion-col",13),e.nrm(1,"div",14),e.j41(2,"ion-button",15),e.bIt("click",function(){const n=e.eBV(r).$implicit,i=e.XpG(2);return e.Njj(i.startGame(n.value))}),e.EFF(3),e.nrm(4,"ion-icon",16),e.k0s()()}if(2&o){const r=c.$implicit,t=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.eq3(4,R,r.value===t.selectedDifficulty)),e.R7$(),e.Y8G("color",r.value===t.selectedDifficulty?r.color:"light"),e.R7$(),e.SpI(" ",r.label," "),e.R7$(),e.Y8G("name",r.icon)}}function Y(o,c){if(1&o){const r=e.RV6();e.j41(0,"div")(1,"div",4),e.EFF(2," TIC-TAC-TOE "),e.k0s(),e.j41(3,"ion-fab",5)(4,"ion-fab-button",1),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.openDidactModal())}),e.nrm(5,"ion-icon",6),e.k0s()(),e.j41(6,"div",7),e.nrm(7,"app-gameboard"),e.k0s(),e.j41(8,"div",8)(9,"p"),e.EFF(10),e.k0s(),e.j41(11,"ion-button",1),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.restartGame())}),e.EFF(12,"Recommencer"),e.k0s(),e.j41(13,"ion-button",1),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.switchToPlayerVsPlayer())}),e.EFF(14,"Joueur vs Joueur"),e.k0s()(),e.DNE(15,D,2,0,"div",9),e.j41(16,"ion-grid")(17,"ion-row"),e.DNE(18,E,5,6,"ion-col",10),e.k0s()()()}if(2&o){const r=e.XpG();e.R7$(10),e.SpI("Au tour de: ",r.currentTurn,""),e.R7$(5),e.Y8G("ngIf",r.isThinking),e.R7$(3),e.Y8G("ngForOf",r.difficulties)}}let N=(()=>{var o;class c{constructor(t,n,i,a){this.popupService=t,this.gameService=n,this.modalController=i,this.navCtrl=a,this.isLoading=!0,this.start_play="player",this.selectedDifficulty="facile",this.difficulties=[{label:"Facile",value:"facile",icon:"beer",color:"success"},{label:"Medium",value:"medium",icon:"hammer",color:"warning"},{label:"Expert",value:"expert",icon:"skull",color:"danger"}],(0,w.a)({"close-circle-outline":d.p9N,"help-circle-outline":d.W2C,"arrow-back-circle-outline":d.BiC,beer:d.LTI,hammer:d.ndb,skull:d.C4e})}startGame(t){var n=this;return(0,P.A)(function*(){let i="Joueur";i=yield n.popupService.showStartGamePopup(),console.log("Qui commence:",i),console.log("Difficult\xe9 s\xe9lectionn\xe9e:",t),n.start_play=i,n.gameService.startGame(i,t),n.selectedDifficulty=n.gameService.getdifficulty})()}switchToPlayerVsPlayer(){this.selectedDifficulty="",this.gameService.startGame("Joueur 1","")}restartGame(){this.gameService.startGame("Joueur",this.selectedDifficulty)}ngOnInit(){setTimeout(()=>{this.isLoading=!1},1e3)}openDidactModal(){var t=this;return(0,P.A)(function*(){(yield t.modalController.create({component:G.c,componentProps:{gameName:"morpion"}})).present()})()}get isThinking(){return this.gameService.thinking}goBack(){this.navCtrl.back()}get currentTurn(){return this.selectedDifficulty=this.gameService.getdifficulty,""!=this.selectedDifficulty?"X"===this.gameService.currentPlayer?"Joueur":"Ordinateur":"X"===this.gameService.currentPlayer?"Joueur 1":"Joueur 2"}}return(o=c).\u0275fac=function(t){return new(t||o)(e.rXU(y.O),e.rXU(h),e.rXU(F.W3),e.rXU(X.q9))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-morpion"]],standalone:!0,features:[e.Jv_([h]),e.aNF],decls:11,vars:2,consts:[["slot","start"],[3,"click"],["name","arrow-back-circle-outline"],[4,"ngIf"],[1,"header"],["vertical","top","horizontal","end","slot","fixed"],["name","help-circle-outline"],[1,"game-board"],[1,"info-game"],["class","loader-container",4,"ngIf"],["size","auto",4,"ngFor","ngForOf"],[1,"loader-container"],[1,"loader"],["size","auto"],[1,"arrow",3,"ngClass"],["expand","block",1,"difficulty-button",3,"click","color"],["slot","end",3,"name"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){return n.goBack()}),e.nrm(4,"ion-icon",2),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6," Accueil "),e.k0s()()(),e.j41(7,"ion-content"),e.DNE(8,I,2,0,"div",3),e.nrm(9,"app-toast"),e.DNE(10,Y,19,3,"div",3),e.k0s()),2&t&&(e.R7$(8),e.Y8G("ngIf",n.isLoading),e.R7$(2),e.Y8G("ngIf",!n.isLoading))},dependencies:[l.W9,l.eU,l.BC,l.ai,g.MD,g.YU,g.Sq,g.bT,M.YN,T.V,l.lO,l.ln,l.hU,l.Jm,l.iq,S,l.Q8,l.YW,l.QW,j.d],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: #f0f0f0}ion-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{text-align:center;margin-top:20px;font-size:2em;color:#333}ion-content[_ngcontent-%COMP%]   .game-board[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:20px 0;padding-top:50px}ion-content[_ngcontent-%COMP%]   .info-game[_ngcontent-%COMP%]{text-align:center;font-size:1.2em;margin:10px 0;color:#555}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:10px;right:10px;display:flex;justify-content:space-around}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{display:flex;justify-content:center}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:5px;--border-radius: 12px;--padding-start: 20px;--padding-end: 20px;--animation: buttonAnimation .1s ease infinite}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:8px}@keyframes _ngcontent-%COMP%_buttonAnimation{0%{transform:translateY(0)}50%{transform:translateY(-5px)}to{transform:translateY(0)}}.loader-container[_ngcontent-%COMP%]{position:relative;margin-top:20px;width:100%;text-align:center}.loader[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.difficulty-facile[_ngcontent-%COMP%]{background-color:#90ee90;padding:5px;border-radius:5px}.difficulty-medium[_ngcontent-%COMP%]{background-color:#ff0;padding:5px;border-radius:5px}.difficulty-expert[_ngcontent-%COMP%]{background-color:#f08080;padding:5px;border-radius:5px}.arrow[_ngcontent-%COMP%]{position:absolute;top:-15px;left:50%;transform:translate(-50%) rotate(180deg);width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:20px solid #39a0de;opacity:0;animation:_ngcontent-%COMP%_moveArrow 2s infinite alternate}@keyframes _ngcontent-%COMP%_moveArrow{0%{top:-30px}50%{top:-20px}to{top:-20px}}.arrow.visible[_ngcontent-%COMP%]{opacity:1}']}),c})()}}]);